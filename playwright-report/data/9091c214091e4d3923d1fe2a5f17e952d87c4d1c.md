# Test info

- Name: Payment methods in SPA mode for expertsonline.com >> should render PayPal method
- Location: /__w/consultations/consultations/e2e/tests/payment-form-render.spec.ts:41:13

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveCount(expected)

Locator: getByTestId('paypal-button-container').locator('iframe')
Expected: 2
Received: 3
Call log:
  - expect.toHaveCount with timeout 5000ms
  - waiting for getByTestId('paypal-button-container').locator('iframe')
    4 × locator resolved to 0 elements
      - unexpected value "0"
    3 × locator resolved to 3 elements
      - unexpected value "3"

    at /__w/consultations/consultations/e2e/tests/payment-form-render.spec.ts:55:54
```

# Page snapshot

```yaml
- img
- heading "Connect with real experts and get your answer right now" [level=3]
- img
- paragraph: Clear explanations from professionals
- img
- paragraph: Help with a wide range of questions
- img
- paragraph: Industry-standard payment security
- paragraph:
  - text: By clicking "PayPal", "CONNECT NOW", "Buy with GPay" or "ApplePay", I agree to be charged one-time $1 join fee and
  - strong: $38
  - text: subscription fee every month. My subscription renews automatically until I cancel it in
  - link "My Account":
    - /url: /account/membership/
  - text: or at support@expertsonline.com
- heading "Pay with PayPal" [level=5]
- iframe
- heading "Pay with Credit Card" [level=5]
- iframe
- paragraph: Message 1
- text: You
- paragraph: Expert Emma is working on your issue...
- heading "Issues Emma often solves:" [level=3]
- paragraph: How can I improve my website's SEO to increase traffic?
- paragraph: What are the best practices for email marketing to boost engagement?
- paragraph: Can you recommend strategies for social media marketing to grow my audience?
- heading "Our experts' certifications" [level=3]
- img "certification"
- img "certification"
- img "certification"
- contentinfo:
  - paragraph: Experts Online is not affiliated with or endorsed by any other brand or service.
  - paragraph: © 2026. Experts Online All rights reserved.
  - link "Privacy Policy":
    - /url: /info/privacy-policy/
  - link "Terms of Use":
    - /url: /info/terms-of-service/
  - link "Cookie Policy":
    - /url: /info/cookie-policy/
  - link "Subscription Policy":
    - /url: /info/subscription-policy/
- alert: Sign up to get help | Ask-Crew
```

# Test source

```ts
   1 | import { expect } from '@playwright/test';
   2 |
   3 | import { runDomain } from '../env-variables';
   4 | import { testBase } from '../fixtures/test-base';
   5 | import { LandingPage } from '../pages/landing-page';
   6 | import { PaymentPage } from '../pages/payment-page';
   7 |
   8 | testBase.describe(`Payment methods in SPA mode for ${runDomain}`, () => {
   9 |     let landingPage: LandingPage;
  10 |     let paymentPage: PaymentPage;
  11 |
  12 |     testBase.beforeEach(async ({ page }) => {
  13 |         paymentPage = new PaymentPage(page);
  14 |
  15 |         landingPage = new LandingPage(page);
  16 |         await landingPage.goto();
  17 |     });
  18 |
  19 |     testBase('should render card method', async () => {
  20 |         await landingPage.chatbot.completeConversation();
  21 |         await landingPage.chatbot.navigateToPaymentPage();
  22 |
  23 |         await paymentPage.register();
  24 |
  25 |         const isPaymentTogglerVisible = await paymentPage.isMethodTogglerVisible();
  26 |
  27 |         await paymentPage.form.tryClickMethodToggler(isPaymentTogglerVisible);
  28 |         await paymentPage.form.assertVisible();
  29 |
  30 |         await expect(paymentPage.form.frame).toHaveCount(1);
  31 |
  32 |         await paymentPage.goBack();
  33 |         await paymentPage.goForward();
  34 |
  35 |         await paymentPage.form.tryClickMethodToggler(isPaymentTogglerVisible);
  36 |         await paymentPage.form.assertVisible();
  37 |
  38 |         await expect(paymentPage.form.frame).toHaveCount(1);
  39 |     });
  40 |
  41 |     testBase('should render PayPal method', async () => {
  42 |         testBase.skip(process.env.TEMP_SKIP_PAYPAL_TESTS === 'true');
  43 |
  44 |         await landingPage.chatbot.completeConversation();
  45 |         await landingPage.chatbot.navigateToPaymentPage();
  46 |
  47 |         await paymentPage.register();
  48 |
  49 |         const isPaymentTogglerVisible = await paymentPage.isMethodTogglerVisible();
  50 |
  51 |         await paymentPage.paypalButton.tryClickMethodToggler(isPaymentTogglerVisible);
  52 |
  53 |         await paymentPage.paypalButton.assertVisible();
  54 |
> 55 |         await expect(paymentPage.paypalButton.frame).toHaveCount(2);
     |                                                      ^ Error: Timed out 5000ms waiting for expect(locator).toHaveCount(expected)
  56 |
  57 |         await paymentPage.goBack();
  58 |         await paymentPage.goForward();
  59 |
  60 |         await paymentPage.paypalButton.tryClickMethodToggler(isPaymentTogglerVisible);
  61 |
  62 |         await paymentPage.paypalButton.assertVisible();
  63 |
  64 |         await expect(paymentPage.paypalButton.frame).toHaveCount(2);
  65 |     });
  66 | });
  67 |
```